<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/fragment/head :: head">
<title>Quản lý Banner</title>
</head>
<body class="bg-gray-100 font-sans">

	<!-- Header -->
	<div th:replace="admin/fragment/header :: header"></div>

	<div class="flex pt-14 min-h-screen">
		<!-- Sidebar -->
		<div th:replace="admin/fragment/aside :: aside"></div>

		<!-- Main Content -->
		<main class="flex-1 p-6">
			<h1 class="text-3xl font-bold text-gray-800 mb-6">Chào mừng đến
				với Banner</h1>

			<!-- Flash messages -->
			<div th:if="${success}"
				class="bg-green-100 text-green-800 p-2 rounded mb-4"
				th:text="${success}"></div>
			<div th:if="${error}"
				class="bg-red-100 text-red-800 p-2 rounded mb-4" th:text="${error}"></div>

			<form th:action="@{/admin/banner}" method="get"
				class="mb-4 flex gap-2">
				<input type="text" name="keyword" th:value="${keyword}"
					class="form-control border px-2 py-1 rounded"
					placeholder="Tìm kiếm">
				<button type="submit"
					class="btn btn-default px-3 py-1 rounded bg-gray-200 hover:bg-gray-300">
					<i class="fa-solid fa-search"></i>
				</button>
			</form>

			<div class="flex justify-between items-center mb-4">
				<a th:href="@{/admin/add-banner}"
					class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
					+ Thêm Banner </a>
			</div>

			<div class="overflow-x-auto bg-white rounded shadow">
				<table class="min-w-full divide-y divide-gray-200">
					<thead
						class="bg-gray-100 text-left text-sm font-medium text-gray-600">
						<tr>
							<th class="px-4 py-2">ID</th>
							<th class="px-4 py-2">Hình ảnh</th>
							<th class="px-4 py-2">Tiêu đề</th>
							<th class="px-4 py-2">Trạng thái</th>
							<th class="px-4 py-2">Hành động</th>
						</tr>
					</thead>
					<tbody class="divide-y divide-gray-200 text-sm text-gray-700"
						th:if="${listBanner != null}">
						<tr th:each="banner : ${listBanner}">
							<td class="px-4 py-2 text-sm text-gray-700"
								th:text="${banner.id}"></td>
							<td class="px-4 py-2 text-sm text-gray-700"><img
								th:src="@{'/uploads/' + ${banner.image.startsWith('/') ? banner.image.substring(1) : banner.image}}"
								alt="image" class="h-12 w-12 object-cover rounded"></td>
							<td class="px-4 py-2 text-sm text-gray-700"
								th:text="${banner.title}"></td>
							<td class="px-4 py-2 text-sm text-gray-700"><span
								th:if="${banner.status}"
								class="inline-block px-2 py-1 text-xs font-semibold text-white bg-green-500 rounded">Hiện</span>
								<span th:if="${!banner.status}"
								class="inline-block px-2 py-1 text-xs font-semibold text-white bg-red-500 rounded">Ẩn</span>
							</td>
							<td class="px-4 py-2 space-x-2"><a
								th:href="@{/admin/edit-banner/{id}(id=${banner.id})}"
								class="text-blue-600 hover:underline text-sm">Sửa</a> <a
								th:href="@{/admin/delete-banner/{id}(id=${banner.id})}"
								onclick="return confirm('Bạn có chắc không ?')"
								class="text-red-600 hover:underline text-sm">Xóa</a></td>
						</tr>
					</tbody>
				</table>

				<!-- Pagination -->
				<div class="flex justify-end mt-4">
					<ul class="inline-flex -space-x-px text-sm">
						<li th:if="${currentPage > 1}"><a
							th:href="@{'?pageNo=' + ${currentPage - 1}}"
							class="px-3 py-1 rounded-l bg-gray-100 border border-gray-300 hover:bg-gray-200">&laquo;</a>
						</li>
						<li th:each="i:${#numbers.sequence(1, totalPage)}"
							th:classappend="${currentPage == i ? 'active' : ''}"><a
							th:href="@{${keyword != null && keyword != '' ? '?keyword=' + keyword + '&' : '?'} + 'pageNo=' + ${i}}"
							th:text="${i}"
							class="px-3 py-1 bg-white border border-gray-300 hover:bg-gray-100"></a>
						</li>
						<li th:if="${currentPage < totalPage}"><a
							th:href="@{'?pageNo=' + ${currentPage + 1}}"
							class="px-3 py-1 rounded-r bg-gray-100 border border-gray-300 hover:bg-gray-200">&raquo;</a>
						</li>
					</ul>
				</div>
			</div>
		</main>
	</div>

	<!-- Scripts -->
	<div th:replace="admin/fragment/script :: script"></div>
</body>
</html>
